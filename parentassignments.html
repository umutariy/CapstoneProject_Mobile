<!--html doctype written by Brian Martey-->
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Child Assignments</title>
    <link rel="shortcut icon" type="image/png" href="eduapp2.png"/>
    <link rel="stylesheet" href="css/foundation.min.css">
    <link rel="stylesheet" href="foundation/fonts/foundation-icons.css"> 
    <link href="css/foundation-icons.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="dist/sweetalert.css">
    <link rel="stylesheet" type="text/css" href="css/student.css">
    <link rel="stylesheet" type="text/css" href="dist/sweetalert.css">
    <link rel="stylesheet" type="text/css" href="css/student.css">
    <link rel="stylesheet" type="text/css" href="css/jquery.dataTables.css">
    <link rel="stylesheet" type="text/css" href="css/scroller.dataTables.css">
    <link rel="stylesheet" type="text/css" href="css/scroller.foundation.css">
    <link rel="stylesheet" type="text/css" href="css/dataTables.foundation.min.css">
    <link rel="stylesheet" type="text/css" href="css/responsive.foundation.min.css">
    <link rel="stylesheet" type="text/css" href="css/dataTable.style.css">
    <link rel="stylesheet" type="text/css" href="css/rowReorder.dataTables.min.css">

    <script src="js/jquery.js"></script>
    <script src='lib/moment.min.js'></script>
    <script src="dist/sweetalert.min.js"></script>
    <script type="text/javascript" language="javascript" src="js/jquery-2.2.4.js"></script>
    <script type="text/javascript" language="javascript" src="js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" language="javascript" src="js/dataTables.foundation.min.js"></script>
    <script type="text/javascript" language="javascript" src="js/dataTables.rowReorder.min.js"></script>
    <!-- <script type="text/javascript" language="javascript" src="js/dataTables.scroller.js"></script> -->
    <script type="text/javascript" language="javascript" src="js/dataTables.responsive.min.js"></script>
    <script type="text/javascript" language="javascript" src="js/responsive.foundation.min.js"></script>

  </head>
  <body>
<div class="off-canvas-wrapper">
  <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper>

    <!-- off-canvas title bar for 'small' screen -->
    <div class="title-bar callout primary medium head" data-responsive-toggle="widemenu" data-hide-for="medium">
      <div class="title-bar-left">
        <ul class="menu">
          <li><a href="#"><i class="icons fi-list" type="button" data-open="offCanvasLeft"></i></a></li>
        </ul>
      </div>
      <div class="title-bar-right">
        <a><img class="circularimage" src="eduapp.png" alt="logo.jpg" id ="applogo"></a>
      </div>
    </div>

    <!-- off-canvas left menu -->
    <div class="off-canvas position-left" id="offCanvasLeft" data-off-canvas>

      <!-- Close button -->
      <button class="close-button" aria-label="Close menu" type="button" data-close>
        <span aria-hidden="true">&times;</span>
      </button>

      <ul class="vertical dropdown menu" data-dropdown-menu>

        <li><a class="text-center"><img class="bigcircularimage" src="" alt="profile.jpg" id ="profilephoto1"></a></li>
        <li><br></li>
        <li><a class="hollowbutton button" href="parentpage.html"><i class="icons fi-arrow-left"></i><span>Back</span></a></li>
        <li><a class="hollowbutton button" href="parentusers.html"><i class="icons fi-male-female"></i><span>Children</span></a></li>
        <li><a class="hollowbutton button" href="parentrecords.html"><i class="icons fi-results"></i><span>Records</span></a></li>
        <li><br></br></li>
        <li><br></br></li>
        <li class="text-center"><button id="logout1" class="hollowbutton button" href="#">Sign Out</button></li>
      </ul>
    </div>

    <!-- "wider" top-bar menu for 'medium' and up -->
    <div id="widemenu" class="widemenu callout primary medium head">
      <div class="row columns small-12 medium-12 large-12">
        <div class="columns small-4 medium-4 large-4">
        <ul class="menu align-left">
          <li><a href="parentpage.html"><i class="icons fi-arrow-left"></i></a></li>
          <li>
            <ul class="dropdown menu" data-dropdown-menu>
              <li>
                <a href="#"><i class="icons fi-list"></i></a>
                <ul class="menu">
                  <li><a href="parentusers.html"><i class="icons fi-male-female"></i><span>Children</span></a></li>
                  <li><a href="parentrecords.html"><i class="icons fi-results"></i><span>Records</span></a></li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
        </div>
        <div class="columns small-4 medium-4 large-4">
        <ul class="menu-centered">
          <a><img class="circularimage float-center" src="" alt="profile.jpg" id ="profilephoto2" ></a>
        </ul>
        </div>
        <div class="columns small-4 medium-4 large-4">  
        <ul class="menu align-right">
          <li><button id="logout2" class="hollowbutton hollow button" href="#">Sign Out</button></li>
        </ul>
        </div>
      </div>
    </div>

    <!-- original content goes in this container -->
    <div class="off-canvas-content" data-off-canvas-content>
      <div class="widebody">  
        <div class="innerwidebody">
          <div class="callout">
            <fieldset class="fieldset">
              <legend>Assignments</legend>
              <div id="plist" class="row columns medium-12">
              </div>
            </fieldset> 
          </div>        
        </div>
        <div class="hide-for-small-only">
          <div class="text-center">
            <a><img class="circularimage" src="eduapp.png" alt="logo.jpg" id ="applogo"></a>
          </div>
        </div>
      </div>
    </div>

  <!-- close wrapper, no more content after this -->
  </div>
</div>


    <script src="js/foundation.min.js"></script>
    <script src="js/foundation.js"></script>
    <script src="js/foundation/foundation.offcanvas.js"></script>
    <script src="js/student.js"></script>

    <script type="text/javascript">
    var parentinfo = sessionStorage.getItem('parentdata');
    var parsedinfo = JSON.parse(parentinfo);
    document.getElementById("profilephoto1").src = parsedinfo.photo;
    document.getElementById("profilephoto2").src = parsedinfo.photo;
    var ptid = parsedinfo.uid;
    var schid = parsedinfo.schoolid;
    var children = parsedinfo.children;
    var starray = [];
    var names = [];
    starray = children.split(',');
    var jsnarray = JSON.stringify(starray);

    var csserver = "http://cs.ashesi.edu.gh/~brian.martey/applied_2017_spring/eduapp/";

    $.ajax({
      type: 'POST',
      url: csserver+'usersservice.php?cmd=12&id='+jsnarray,
      success: function(data)
        {
          var info = JSON.parse(data);
          var postlist = '<ul class="accordion" data-accordion data-allow-all-closed="true">';
          for(var j = 0; j < starray.length; j++) {
            postlist+= '<li class="accordion-item" data-accordion-item><a class="accordion-title" href="#">'+info[j]+'</a>';
            postlist+= '<div class="accordion-content" data-tab-content>';
            postlist+= '<h4 id="showbutton'+j+'"><a class="hollow button expanded" href="#" onclick="swap('+j+','+starray[j]+')">Show Assignments</a></h4>';
            postlist+= '<h4 id="showsbutton'+j+'" style="display:none"><a class="hollow button expanded" href="#" onclick="swapin('+j+','+starray[j]+')">Show Assignments</a></h4>';
            postlist+= '<h4 id="hidebutton'+j+'" style="display:none"><a class="button expanded" href="#" onclick="swapout('+j+','+starray[j]+')">Hide Assignments</a></h4>';
            postlist+= '<div id=assignlist'+j+'></div>';
            postlist+= '</div>';
            postlist+= '</li>';
          }
          postlist+='</ul>';
          jQuery('#plist').html(postlist);
        }
    });

    $(document).ready(function() {
      var parentinfo = sessionStorage.getItem('parentdata');
      var parsedinfo = JSON.parse(parentinfo);
      document.getElementById("profilephoto1").src = parsedinfo.photo;
      document.getElementById("profilephoto2").src = parsedinfo.photo;
      var ptid = parsedinfo.uid;
      var schid = parsedinfo.schoolid;
      var children = parsedinfo.children;
      var starray = [];
      var names = [];
      starray = children.split(',');

      jQuery(document ).ajaxComplete( function($) {
        jQuery(this).foundation();
      });

    });

    function swap(num,id){
      $('#hidebutton'+num).show();
      $('#showbutton'+num).hide();
      createassign(num,id);

    }

    function swapin(num,id){
      $('#hidebutton'+num).show();
      $('#showsbutton'+num).hide();
      showassign(num,id);

    }

    function swapout(num,id){
      $('#hidebutton'+num).hide();
      $('#showsbutton'+num).show();
      hideassign(num,id);
    } 

    function createassign(num,id) {
      $.ajax({
        type: 'POST',
        url: csserver+'assignmentservice.php?cmd=10&stid='+id,
        success: function(data)
        { 
            var assignnames = JSON.parse(data);
            var div = document.getElementById("assignlist"+num);
            if (assignnames.length < 1) {
              div1 = document.createElement("h1");
              div1.setAttribute('id','h'+num+'h'+i);
              div2 = document.createElement("a");
              div2.setAttribute('id','answerbutton'+i);
              div2.setAttribute('class','hollow button expanded');
              div2.appendChild(document.createTextNode('No Assignment For Now'));
              div1.appendChild(div2);
              div.appendChild(div1);
            }else{
              for (var i = 0; i < assignnames.length; i++) {
                div1 = document.createElement("h1");
                div1.setAttribute('id','h'+assignnames[i].info[3]+'h'+i);
                div2 = document.createElement("a");
                div2.setAttribute('id','answerbutton'+i);
                div2.setAttribute('class','hollow button expanded');
                div2.setAttribute('onclick','reviewdirect('+assignnames[i].info[2]+','+assignnames[i].info[3]+')');
                div2.appendChild(document.createTextNode('Review '+assignnames[i].info[0]+' Assignment'));
                div1.appendChild(div2);
                div.appendChild(div1);
              } 
            }
        }
      });  
    }

    function showassign(num,id) {
      $.ajax({
        type: 'POST',
        url: csserver+'assignmentservice.php?cmd=10&stid='+id,
        success: function(data)
        { 
            var assignnames = JSON.parse(data);
            var div = document.getElementById("assignlist"+num);
            if (assignnames.length < 1) {
              $('#h'+num+'h'+i).show();
            }else{
              for (var i = 0; i < assignnames.length; i++) {
                $('#h'+assignnames[i].info[3]+'h'+i).show();
              }
            }
        }
      });
    } 

    function hideassign(num,id) {
      $.ajax({
        type: 'POST',
        url: csserver+'assignmentservice.php?cmd=10&stid='+id,
        success: function(data)
        { 
            var assignnames = JSON.parse(data);
            var div = document.getElementById("assignlist"+num);
            if (assignnames.length < 1) {
              $('#h'+num+'h'+i).hide();
            }else{
              for (var i = 0; i < assignnames.length; i++) {
                $('#h'+assignnames[i].info[3]+'h'+i).hide();
              }
            }
        }
      });
    } 

    function reviewdirect(info,stid) {
      localStorage.setItem('stid', stid);
      localStorage.setItem('questiondata', info);
      window.location.href = "parentreview.html";
    }

    $('#logout1').click(function(event) {
        event.preventDefault();
        sessionStorage.removeItem('parentdata');
        window.location.href = "index.html";
      });

    $('#logout2').click(function(event) {
        event.preventDefault();
        sessionStorage.removeItem('parentdata');
        window.location.href = "index.html";
      });

    </script>

  </body>
</html>
